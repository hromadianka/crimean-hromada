{% extends 'base.html' %}

{% block content %}
<h1>Результати пошуку</h1>

{% if no_results %}
<p>Нічого не знайдено для вибраних критеріїв пошуку.</p>
{% else %}
  {% for project in projects %}
<div class="project-card">
    <div class="project-info">
        <h2><a href="/project/{{ project.id }}" style="text-decoration: none">{{ project.name }}</a></h2>
        <p>{% autoescape off %}{{ project.description }}{% endautoescape %}</p>
    </div>
    <div class="project-action">
        <button class="like-button" data-project-id="{{ project.id }}">
            <span class="like-icon">👊</span>
            <span class="like-count">{{ project.likes }}</span>
        </button>
    </div>
</div>
  {% endfor %}

  {% for idea in ideas %}
<div class="idea-card">
    <div class="idea-info">
        <h2><a href="{% url 'idea_detail' idea.id %}" style="text-decoration: none">{{ idea.name }}</a></h2>
        <p>{% autoescape off %}{{ idea.description }}{% endautoescape %}</p>
    </div>
    <div class="idea-action">
        <form id="saveIdeaForm" method="post" action="{% url 'save_idea' idea_id=idea.id %}">
            {% csrf_token %}
            <button type="submit" class="idea-button {% if idea in request.user.profile.saved_ideas.all %}saved{% endif %}" onclick="saveIdea('{{ idea.id }}')">
                <span class="idea-icon">🔖</span>
            </button>
        </form>
    </div>
</div>
{% endfor %}

<ul>
 {% for task in tasks %}
    <li><a href="{% url 'project' task.project.id %}" style="text-decoration: none">{{ task.name }}</a></li>
 {% endfor %}
</ul>

{% endif %}


{% endblock %}